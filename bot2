import discord
from config import token

intents = discord.Intents.default()
intents.message_content = True
intents.members = True  # Üyelerle ilgili bilgileri dinlemek için bu izni etkinleştirdik

client = discord.Client(intents=intents)

@client.event
async def on_ready():
    print(f'We have logged in as {client.user}')

@client.event
async def on_member_join(member):
    # Hoş geldin mesajını göndereceğiniz kanalın gerçek ID'sini buraya girin
    channel_id = 1328797536802046006  # Gerçek kanal ID'nizle değiştirin
    channel = client.get_channel(channel_id)
    if channel:
        await channel.send(f'Merhaba {member.display_name}, sunucumuza hoş geldin!')

@client.event
async def on_message(message):
    if message.author == client.user:
        return

    if message.content.startswith('$hello'):
        await message.channel.send('Hello!')

    # Sayı toplama komutu
    if message.content.startswith('$topla'):
        try:
            parts = message.content.split()
            num1 = int(parts[1])
            num2 = int(parts[2])
            result = num1 + num2
            await message.channel.send(f'{num1} + {num2} = {result}')
        except (IndexError, ValueError):
            await message.channel.send('Kullanım: $topla num1 num2')

    # Sayı çıkarma komutu
    if message.content.startswith('$cikar'):
        try:
            parts = message.content.split()
            num1 = int(parts[1])
            num2 = int(parts[2])
            result = num1 - num2
            await message.channel.send(f'{num1} - {num2} = {result}')
        except (IndexError, ValueError):
            await message.channel.send('Kullanım: $cikar num1 num2')

    # Sayı çarpma komutu
    if message.content.startswith('$carp'):
        try:
            parts = message.content.split()
            num1 = int(parts[1])
            num2 = int(parts[2])
            result = num1 * num2
            await message.channel.send(f'{num1} * {num2} = {result}')
        except (IndexError, ValueError):
            await message.channel.send('Kullanım: $carp num1 num2')

    # Sayı bölme komutu
    if message.content.startswith('$bol'):
        try:
            parts = message.content.split()
            num1 = int(parts[1])
            num2 = int(parts[2])
            if num2 == 0:
                await message.channel.send('Bir sayıyı sıfıra bölemezsiniz.')
            else:
                result = num1 / num2
                await message.channel.send(f'{num1} / {num2} = {result:.2f}')  # Sonucu 2 ondalık basamağa yuvarla
        except (IndexError, ValueError):
            await message.channel.send('Kullanım: $bol num1 num2')

# Botu çalıştır
client.run(token)
